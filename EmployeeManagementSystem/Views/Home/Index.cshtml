@{
    ViewData["Title"] = "Dashboard";
    var stats = ViewBag.DashboardStats;
}

<div class="container-fluid py-4">
    <!-- Welcome Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient-primary text-white">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h1 class="display-6 fw-bold mb-3">
                                Welcome to Employee Management System
                            </h1>
                            <p class="lead mb-0">
                                Manage your workforce efficiently with our comprehensive employee management solution.
                                Track performance, manage payroll, and streamline HR processes.
                            </p>
                        </div>
                        <div class="col-md-4 text-end">
                            <i class="fas fa-chart-line fa-8x opacity-50"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start border-primary border-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="text-muted mb-2">Total Employees</h6>
                            <h2 class="mb-0">@stats.TotalEmployees</h2>
                        </div>
                        <div class="avatar avatar-sm bg-primary rounded-circle">
                            <i class="fas fa-users fa-2x text-white"></i>
                        </div>
                    </div>
                    <div class="mt-3">
                        <span class="badge bg-success">
                            <i class="fas fa-arrow-up me-1"></i> 12% from last month
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start border-success border-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="text-muted mb-2">Departments</h6>
                            <h2 class="mb-0">@stats.Departments</h2>
                        </div>
                        <div class="avatar avatar-sm bg-success rounded-circle">
                            <i class="fas fa-building fa-2x text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start border-info border-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="text-muted mb-2">New This Month</h6>
                            <h2 class="mb-0">@stats.NewThisMonth</h2>
                        </div>
                        <div class="avatar avatar-sm bg-info rounded-circle">
                            <i class="fas fa-user-plus fa-2x text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start border-warning border-4">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h6 class="text-muted mb-2">Avg. Salary</h6>
                            <h2 class="mb-0">$@stats.AvgSalary.ToString("N0")</h2>
                        </div>
                        <div class="avatar avatar-sm bg-warning rounded-circle">
                            <i class="fas fa-dollar-sign fa-2x text-white"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="row">
        <div class="col-lg-8 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Employee Distribution by Department</h5>
                </div>
                <div class="card-body">
                    <canvas id="departmentChart" height="250"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-4 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Employment Status</h5>
                </div>
                <div class="card-body">
                    <canvas id="statusChart" height="250"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-history me-2"></i>Recent Activity</h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item">
                            <div class="d-flex w-100 justify-content-between">
                                <div>
                                    <i class="fas fa-user-plus text-success me-2"></i>
                                    <strong>John Doe</strong> joined as Senior Developer
                                </div>
                                <small class="text-muted">2 hours ago</small>
                            </div>
                        </div>
                        <div class="list-group-item">
                            <div class="d-flex w-100 justify-content-between">
                                <div>
                                    <i class="fas fa-money-bill-wave text-primary me-2"></i>
                                    <strong>Payroll</strong> processed for November
                                </div>
                                <small class="text-muted">1 day ago</small>
                            </div>
                        </div>
                        <div class="list-group-item">
                            <div class="d-flex w-100 justify-content-between">
                                <div>
                                    <i class="fas fa-trophy text-warning me-2"></i>
                                    <strong>Employee of the Month</strong> awarded to Jane Smith
                                </div>
                                <small class="text-muted">2 days ago</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Department Chart
        var deptCtx = document.getElementById('departmentChart').getContext('2d');
        var deptChart = new Chart(deptCtx, {
            type: 'bar',
            data: {
                labels: ['Engineering', 'Marketing', 'HR', 'Sales', 'Finance', 'Operations'],
                datasets: [{
                    label: 'Number of Employees',
                    data: [45, 22, 18, 30, 15, 25],
                    backgroundColor: [
                        '#4361ee', '#3a0ca3', '#7209b7', '#f72585', '#4cc9f0', '#4895ef'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Status Chart
        var statusCtx = document.getElementById('statusChart').getContext('2d');
        var statusChart = new Chart(statusCtx, {
            type: 'doughnut',
            data: {
                labels: ['Full-time', 'Part-time', 'Contract', 'Intern'],
                datasets: [{
                    data: [85, 10, 3, 2],
                    backgroundColor: [
                        '#4361ee',
                        '#3a0ca3',
                        '#7209b7',
                        '#f72585'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                cutout: '70%',
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    </script>
}