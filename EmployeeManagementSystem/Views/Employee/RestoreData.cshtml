@model List<TblEmployee>

@{
    ViewData["Title"] = "Employee Index";
}

<div class="container py-4">
    <div class="d-flex align-items-center mb-3">
        <h2 class="mb-0">Employee Index</h2>
        <span class="ms-3 badge bg-primary">
            @Model?.Count()
        </span>

      @*   @{
            var total = Model?.Count() ?? 0;
            // Each page shows 10 items, so figure out which range the count falls into
            var start = total == 0 ? 0 : ((total - 1) / 10) * 10 + 1;
            var end = total == 0 ? 10 : start + 9;
        } *@

        @* <span class="ms-3 badge bg-primary">
            @($"{start}-{end}")
        </span> *@

        @* <div class="ms-auto">
            <a asp-controller="Employee" asp-action="Create" class="btn btn-success">
                <i class="bi bi-plus-circle me-1"></i> Create New Employee
            </a>
        </div> *@

        <div class="ms-3">
            @* <input id="searchBox" type="text" class="form-control" placeholder="Search employees..." /> *@
            <h1>Back To Restore Data</h1>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0" id="employeesTable">
                    <thead class="table-light">
                        <tr>
                            <th>Full Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Department</th>
                            <th>Position</th>
                            <th>Actions</th>
                            @* <thstyle style="width:160px;">Actions</thstyle> *@
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var employee in Model)
                        {
                            <tr>
                                <td>@($"{employee.EmployeeFirstName} {employee.EmployeesLastName}")</td>
                                <td>
                                    <a href="mailto:@employee.EmployeeEmail" class="text-decoration-none">
                                        <i class="bi bi-envelope me-1"></i>@employee.EmployeeEmail
                                    </a>
                                </td>
                                <td>
                                    <a href="tel:@employee.EmployeePhone" class="text-decoration-none">
                                        <i class="bi bi-telephone me-1"></i>@employee.EmployeePhone
                                    </a>
                                </td>
                                <td>
                                    <span class="badge bg-info text-dark">@employee.EmployeeDepartment</span>
                                </td>
                                <td>@employee.EmployeePosition</td>
                                <td>
                                    <a asp-controller="Employee" asp-action="Restore" asp-route-id="@employee.EmployeesId" class="btn btn-sm btn-primary me-1">
                                        <i class="bi btn-outline-info"></i> Restore
                                    </a>
                                   @*  <a asp-action="Delete" asp-route-id="@employee.EmployeesId" class="btn btn-sm btn-danger">
                                        <i class="bi bi-trash"></i> Delete
                                    </a> *@
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-center mt-3">
        <nav>
            <ul class="pagination" id="pagination"></ul>
        </nav>
    </div>
</div>

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<script>
    (function () {
        const table = document.getElementById('employeesTable');
        const rows = Array.from(table.querySelectorAll('tbody tr'));
        const rowsPerPage = 10;
        let currentPage = 1;
        const pagination = document.getElementById('pagination');

        function displayRows() {
            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            rows.forEach((row, i) => {
                row.style.display = (i >= start && i < end) ? '' : 'none';
            });
        }

        function setupPagination() {
            pagination.innerHTML = '';
            const pageCount = Math.ceil(rows.length / rowsPerPage);

            const prev = document.createElement('li');
            prev.className = 'page-item' + (currentPage === 1 ? ' disabled' : '');
            prev.innerHTML = `<a class="page-link" href="#">Previous</a>`;
            prev.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    displayRows();
                    setupPagination();
                }
            });
            pagination.appendChild(prev);

            for (let i = 1; i <= pageCount; i++) {
                const li = document.createElement('li');
                li.className = 'page-item' + (i === currentPage ? ' active' : '');
                li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
                li.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentPage = i;
                    displayRows();
                    setupPagination();
                });
                pagination.appendChild(li);
            }

            const next = document.createElement('li');
            next.className = 'page-item' + (currentPage === pageCount ? ' disabled' : '');
            next.innerHTML = `<a class="page-link" href="#">Next</a>`;
            next.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentPage < pageCount) {
                    currentPage++;
                    displayRows();
                    setupPagination();
                }
            });
            pagination.appendChild(next);
        }

        displayRows();
        setupPagination();
    })();
</script>
